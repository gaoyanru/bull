<div class="recharge">
  <h2 class="clearfix ng-binding">订单占比分析</h2>
  <uib-tabset active="active" style="margin-top: 6px;">
    <uib-tab index="1" heading="预提单与正式订单占比">
      <div style="padding: 6px 12px;">
        <div class="well well-sm u-search">
          <form class="form-inline">
            <div class="form-group">
              <select class="form-control" ng-model="search2.year">
                <option value="2017">2017</option>
                <option value="2016">2016</option>
              </select>  <label>年</label>
            </div>
            <div class="btn-group" uib-dropdown>
              <button id="single-button" type="button" class="btn form-control multiselect-button" uib-dropdown-toggle ng-disabled="disabled">
                <span ng-bind="params2.selectedText" style="min-width: 60px;display: inline-block;"></span> <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-multiselect" uib-dropdown-menu role="menu" aria-labelledby="single-button" ng-click=" $event.stopPropagation();">
                <li role="menuitem" ng-repeat="month in months2">
                  <label ng-click="params2.setSelectedText()">
                    <input type="checkbox" ng-model="month.selected" ng-value="true">{{::month.label}}</label>
                </li>
              </ul>
              <label style="line-height: 34px;">月</label>
            </div>
            <button type="button" class="btn btn-primary" ng-click="tab2Search()" style="margin-left:20px">查询</button>
            <button type="button" class="btn btn-primary" ng-click="dataExport2()" style="margin-left:20px">导出</button>
          </form>
        </div>
        <div >
          <line-chart config="chart2.config" data="chart2.data"></line-chart>
        </div>
        <table class="table table-striped table-hover table-bordered" id="table2">
          <thead>
            <tr class="info">
              <th>月</th>
              <th>大区</th>
              <th>省</th>
              <th>市</th>
              <th>一级代理商</th>
              <th>二级代理商</th>
              <th>预提单数量</th>
              <th>预提单占比</th>
              <th>正式订单数量</th>
              <th>正式订单数占比</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in data2">
              <td>{{::item.currMonth}}月</td>
              <td>{{::item.PartitionName}}</td>
              <td>{{::item.ProvinceName}}</td>
              <td>{{::item.CityName}}</td>
              <td>{{::item.ChannelName1}}</td>
              <td>{{::item.ChannelName2}}</td>
              <td>{{::item.preOrderNum}}</td>
              <td>{{::item.preOrderRate}}</td>
              <td>{{::item.zsNum}}</td>
              <td>{{::item.zsRate}}</td>
            </tr>
          </tbody>
          <tfoot>
            <tr ng-if="data2.length != 0">
              <td colspan="6">合计</td>
              <td>{{total2.SumPreNum}}</td>
              <td>{{total2.SumPreRate}}</td>
              <td>{{total2.SumZsNum}}</td>
              <td>{{total2.SumZsRate}}</td>
            </tr>
            <tr align="center" ng-if="data2.length === 0">
              <td colspan="10">暂无数据</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </uib-tab>
    <uib-tab index="0" heading="续费订单占比">
      <div style="padding: 6px 12px;">
        <div class="well well-sm u-search">
          <form class="form-inline">
            <div class="form-group">
              <label>年</label>
              <select class="form-control" ng-model="search1.year">
                <option value="2017">2017</option>
                <option value="2016">2016</option>
              </select>
            </div>
            <div class="form-group">
              <label>到期月份</label>
              <select class="form-control" ng-model="search1.months" >
                <option value="">请选择</option>
                <option ng-repeat="item in months" value="{{item.value}}">{{::item.label}}月</option>
              </select>
            </div>
            <!-- <div class="btn-group" uib-dropdown> -->
              <!-- <button id="single-button" type="button" class="btn form-control multiselect-button" uib-dropdown-toggle ng-disabled="disabled">
                <span ng-bind="params.selectedText" style="min-width: 60px;display: inline-block;"></span> <span class="caret"></span>
              </button> -->
              <!-- <ul class="dropdown-menu dropdown-menu-multiselect" uib-dropdown-menu role="menu" aria-labelledby="single-button" ng-click=" $event.stopPropagation();">
                <li role="menuitem" ng-repeat="month in months">
                  <label ng-click="params.setSelectedText()">
                    <input type="checkbox" ng-model="month.selected" class="form-control" ng-value="true">{{::month.label}}</label>
                </li>
              </ul> -->

              <!-- <label style="line-height: 34px;">月</label>
            </div> -->
            <button type="button" class="btn btn-primary" ng-click="tab1Search()" style="margin-left:20px">查询</button>
            <button type="button" class="btn btn-primary" ng-click="dataExport1()" style="margin-left:20px">导出</button>
            <button type="button" class="btn btn-primary" ng-click="export()" style="margin-left:20px">续费明细下载</button>
          </form>
        </div>
        <!-- <div style="width:800px;height: 400px;">
          <line-chart config="chart1.config" data="chart1.data" style="width:800px;height: 400px;"></line-chart>
        </div> -->
        <table class="table table-striped table-hover table-bordered" id="table1">
          <thead>
            <tr class="info">
              <th>月</th>
              <th>大区</th>
              <th>省</th>
              <th>市</th>
              <th>一级代理商</th>
              <th>二级代理商</th>
              <th>续费订单数</th>
              <th>到期订单数</th>
              <th>续费占比</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in data1">
              <td>{{::item.Months}}月</td>
              <td>{{::item.PartitionName}}</td>
              <td>{{::item.ProvinceName}}</td>
              <td>{{::item.CityName}}</td>
              <td>{{::item.ChannelName1}}</td>
              <td>{{::item.ChannelName2}}</td>
              <td>{{::item.ReNum}}</td>
              <td>{{::item.OrderNum||0}}</td>
              <td>{{::item.reNumRate}}</td>
            </tr>
          </tbody>
          <tfoot>
            <tr ng-if="data1.length != 0 && data1">
              <td colspan="6">合计</td>
              <td>{{total1.SumReNum}}</td>
              <td>{{total1.SumOrderNum||0}}</td>
              <td>{{total1.allreRate}}</td>
            </tr>
            <tr align="center" ng-if="data1.length === 0 || !data1">
              <td colspan="9">暂无数据</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </uib-tab>
  </uib-tabset>
</div>
